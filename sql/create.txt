CREATE TABLE EMPLOYEES
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT EMP_PK PRIMARY KEY,
NAME VARCHAR2(30) NOT NULL,
JOB_TYPE VARCHAR2(20) NOT NULL,
PHONE_NUMBER NUMBER NOT NULL,
SALARY NUMBER NOT NULL
);


CREATE TABLE RECEPTIONISTS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT REC_PK PRIMARY KEY,
DESK_NUMBER NUMBER NOT NULL,
CONSTRAINT REC_FK FOREIGN KEY(ID) REFERENCES EMPLOYEES(ID) ON DELETE CASCADE
);

CREATE TABLE FOURTH_GRADE_STAFFS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT STAFF_PK PRIMARY KEY,
WORK_HOUR NUMBER NOT NULL,
CONSTRAINT STAFF_FK FOREIGN KEY(ID) REFERENCES EMPLOYEES(ID) ON DELETE CASCADE
);

CREATE TABLE NURSES
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT NUR_PK PRIMARY KEY,
WORK_HOUR NUMBER NOT NULL,
CONSTRAINT NUR_FK FOREIGN KEY(ID) REFERENCES EMPLOYEES(ID) ON DELETE CASCADE
);

CREATE TABLE DEPARTMENTS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT DEPT_PK PRIMARY KEY,
NAME VARCHAR2(50) NOT NULL
);

CREATE TABLE DOCTORS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT DOC_PK PRIMARY KEY,
DEPARTMENT_ID NUMBER NOT NULL,
EMAIL VARCHAR2(30) NOT NULL,
PASSWORD VARCHAR2(30) NOT NULL,
TOKEN VARCHAR2(200),
CONSTRAINT DOC_FK FOREIGN KEY(ID) REFERENCES EMPLOYEES(ID) ON DELETE CASCADE,
CONSTRAINT DEP_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES DEPARTMENTS(ID) ON DELETE CASCADE
);

CREATE TABLE PATIENTS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT PAT_PK PRIMARY KEY,
NAME VARCHAR2(30) NOT NULL,
AGE NUMBER NOT NULL,
BLOOD_GROUP VARCHAR2(5) NOT NULL
);

CREATE TABLE BILL
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT BILL_PK PRIMARY KEY,
ROOM_CHARGE NUMBER NOT NULL,
MEDICINE_CHARGE NUMBER NOT NULL,
TREATMENT_CHARGE NUMBER NOT NULL
);


CREATE TABLE WARDS
(
WARD_NO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
DEPARTMENT_ID NUMBER,
CONSTRAINT WARD_KEY PRIMARY KEY(WARD_NO, DEPARTMENT_ID),
CONSTRAINT WARD_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES DEPARTMENTS(ID) ON DELETE CASCADE
);

CREATE TABLE ROOMS
(
ROOM_ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT ROOM_PK PRIMARY KEY,
BEDS NUMBER NOT NULL,
WARD_NO NUMBER NOT NULL,
DEPARTMENT_ID NUMBER NOT NULL,
CONSTRAINT ROOM_FK FOREIGN KEY(WARD_NO, DEPARTMENT_ID) REFERENCES WARDS(WARD_NO, DEPARTMENT_ID) ON DELETE CASCADE
--CONSTRAINT DEP_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES DEPARTMENTS(ID) ON DELETE CASCADE
);

CREATE TABLE RECORD
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT RECORD_PK PRIMARY KEY,
PATIENT_ID NUMBER NOT NULL,
ROOM_ID NUMBER NOT NULL,
BILL_ID NUMBER NOT NULL,
ADMISSION_DATE DATE NOT NULL,
DISCHARGE_DATE DATE NOT NULL,
DISEASE VARCHAR2(10) NOT NULL,
CONSTRAINT PAT_FK FOREIGN KEY(PATIENT_ID) REFERENCES PATIENTS(ID) ON DELETE CASCADE,
CONSTRAINT RM_FK FOREIGN KEY(ROOM_ID) REFERENCES ROOMS(ROOM_ID) ON DELETE CASCADE,
CONSTRAINT BL_FK FOREIGN KEY(BILL_ID) REFERENCES BILL(ID) ON DELETE CASCADE
);


CREATE TABLE TESTS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT TEST_PK PRIMARY KEY,
NAME VARCHAR2(15) NOT NULL,
FEE NUMBER NOT NULL,
ROOM_ID NUMBER NOT NULL,
CONSTRAINT RM_FK_TEST FOREIGN KEY(ROOM_ID) REFERENCES ROOMS(ROOM_ID) ON DELETE CASCADE
);


CREATE TABLE MEDICINE
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT MED_PK PRIMARY KEY,
NAME VARCHAR2(10) NOT NULL,
PRICE NUMBER NOT NULL
);


CREATE TABLE BUYS
(
PATIENT_ID NUMBER,
MEDICINE_ID NUMBER,
AMOUNT NUMBER NOT NULL,
CONSTRAINT BUY_KEY PRIMARY KEY(PATIENT_ID, MEDICINE_ID),
CONSTRAINT PAT_FK_BUYS FOREIGN KEY(PATIENT_ID) REFERENCES PATIENTS(ID) ON DELETE CASCADE,
CONSTRAINT MED_FK_BUYS FOREIGN KEY(MEDICINE_ID) REFERENCES MEDICINE(ID) ON DELETE CASCADE
);


CREATE TABLE APPOINTMENTS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY CONSTRAINT APP_PK PRIMARY KEY,
DOCTOR_ID NUMBER NOT NULL,
PATIENT_ID NUMBER NOT NULL,
APPOINT_DATE DATE NOT NULL,
PRESCRIPTION VARCHAR2(50) NOT NULL,
CONSTRAINT PAT_FK_APP FOREIGN KEY(PATIENT_ID) REFERENCES PATIENTS(ID) ON DELETE CASCADE,
CONSTRAINT DOC_FK_APP FOREIGN KEY(DOCTOR_ID) REFERENCES DOCTORS(ID) ON DELETE CASCADE
);

CREATE TABLE DIAGNOSIS
(
ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
DOCTOR_ID NUMBER,
PATIENT_ID NUMBER,
TEST_ID NUMBER,
RESULT VARCHAR2(50) NOT NULL,
CONSTRAINT DIAG_KEY PRIMARY KEY(ID),
CONSTRAINT PAT_FK_DIAG FOREIGN KEY(PATIENT_ID) REFERENCES PATIENTS(ID) ON DELETE CASCADE,
CONSTRAINT DOC_FK_DIAG FOREIGN KEY(DOCTOR_ID) REFERENCES DOCTORS(ID) ON DELETE CASCADE,
CONSTRAINT TEST_FK_DIAG FOREIGN KEY(TEST_ID) REFERENCES TESTS(ID) ON DELETE CASCADE
);

CREATE TABLE BEDS
(
BED_NO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
ROOM_ID NUMBER,
CONSTRAINT BED_PK PRIMARY KEY(BED_NO, ROOM_ID),
CONSTRAINT BED_FK FOREIGN KEY(ROOM_ID) REFERENCES ROOMS(ROOM_ID) ON DELETE CASCADE
);

CREATE TABLE LOGIN
(
	ID NUMBER,
	EMAIL VARCHAR2(30),
	PASSWORD VARCHAR2(30) NOT NULL,
	--CONSTRAINT DOC_FK_LOG FOREIGN KEY(ID, EMAIL) REFERENCES DOCTORS(ID, EMAIL) ON DELETE CASCADE
	CONSTRAINT ID_FK_LOG FOREIGN KEY(ID) REFERENCES DOCTORS(ID) ON DELETE CASCADE,
	CONSTRAINT EMAIL_FK_LOG FOREIGN KEY(EMAIL) REFERENCES DOCTORS(EMAIL) ON DELETE CASCADE
);